\doxysection{server.\+h}
\hypertarget{server_8h_source}{}\label{server_8h_source}\mbox{\hyperlink{server_8h}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ <arpa/inet.h>}\ \ \textcolor{comment}{//inet\_addr\ define}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <sys/socket.h>}\ \textcolor{comment}{//socket(),\ connect(),\ bind(),\ listen(),\ accept(),\ select();\ }}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <unistd.h>}\ \ \textcolor{comment}{//close(),\ fread()}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <ext/stdio\_filebuf.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{abspeer_8h}{abspeer.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <iostream>};}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <typeinfo>};}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#define\ MAXLINE\ 1024}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ PORT\ 8080\ }}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#if\ 0\ \ \ }}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ <сервер>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00017\ \ \ \ \ инициализация\ соединения\ функции\ bind(),\ listen()}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ цикл\ (бесконечный)}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00021\ \ \ \ \ \ \_\_\_\_\_\_\_\_\(\backslash\)\ \ \ \(\backslash\)|/\ }
\DoxyCodeLine{00022\ \ \ \ \ |\ \ \ \ \ \ \ \ /\ установка\ сокетов\ для\ прослушивания.\ /\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_|}
\DoxyCodeLine{00023\ \ \ \ \ |\ \ \ \ \ \ \ поток\ вывода,\ свой\ и\ клиентские\ \ \ \ \ \(\backslash\)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00024\ \ \ \ \ |\ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00025\ \ \ \ \ |\ \ \ \ \ \ \ \ \(\backslash\)|/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00026\ \ \ \ \ |\ \ \ <select()\ возврыщает\ массив\ дескрипторов\ \ \ \ \ режим\ ожидания>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00027\ \ \ \ \ |\ \ \ \ \ |\ при\ записи\ вних\ \ \ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00028\ \ \ \ \ |\ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00029\ \ \ \ \ |\ \ \ \ \(\backslash\)|/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)|/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00030\ \ \ \ \ |\ \ \ если\ select\ возвращает\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ }
\DoxyCodeLine{00031\ \ \ \ \ |\ \ \ сокет\ сервера:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00032\ \ \ \ \ |\ \ \ accept()\ нового\ соединения\ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00033\ \ \ \ \ |\ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)|/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00034\ \ \ \ \ |\ \ \ \ \ \ \ |\ \ \ \ \ \ \ если\ select()\ возвращает\ дескрипторы\ \ read()\ из\ них\ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00035\ \ \ \ \ |\_\_\_\_\_\_\_\_\_\_\_|\ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)|/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)|/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ сообшение\ отсутствует:\ \ \ сообшение\ присутствует:\ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\ Host\ Disconnect\ \ \ \ \ send\ message\ to\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ erase\ from\ socket\ \ \ \ other\ sockets\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ from\ sockets\ massive\ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_|\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_|}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ (stdin\ (поток\ ввода)\ на\ дескрипторе\ 0)\ }
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classServer}{Server}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classPeer}{Peer}}\{}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classServer_ad5ec9462b520e59f7ea831e157ee5e59}{Server}}()\{\};}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//Server(int\ \_sock,\ struct\ sockaddr\_in\ \_addres):AbstractPeer(\_sock,\ \_addres)\{\}}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classServer_a0806beaf535f0bfaff2276b3e7156cbe}{sd}},\mbox{\hyperlink{classServer_a6504e40ca4dd0fa36c6daf5e941477ca}{new\_socket}},\ \mbox{\hyperlink{classServer_a21791bcd571088ead3503134e8daf663}{client\_socket}}[30],\ \mbox{\hyperlink{classServer_af3c343a61d4a3f82bc18412f4cf69859}{max\_clients}}=30,\ \mbox{\hyperlink{classServer_ae71b76cfda4514be1a9bc407f2fe7d54}{activity}},\ \mbox{\hyperlink{classServer_a2792b877f5f7dbccbcb0ebe508ba8bf4}{i}},\ \mbox{\hyperlink{classServer_a4304900cf669a01e4acff5ed287728f8}{max\_sd}},\ \mbox{\hyperlink{classServer_a97172fe0c07ccee4b28afec4b43f19e5}{valread}};}
\DoxyCodeLine{00056\ \ \ \ \ std::vector<std::pair<int,\ char*>>\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classServer_af1f3f8421f767b6cc556775c60748e67}{createSocket}}()\textcolor{keyword}{\ override}\{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPeer_a925963413d249aec471b34561070610c}{sock}}=socket(AF\_INET,\ SOCK\_STREAM,\ 0);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{keyword}{typeid}(\textcolor{keyword}{this}).name()\ <<\ \textcolor{stringliteral}{"{}\ fd\ "{}}\ <<\ \mbox{\hyperlink{classPeer_a925963413d249aec471b34561070610c}{sock}}\ <<\ std::endl;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classServer_abbe9b59d62d3ca74679b154b7ad16bd1}{init1}}()\textcolor{keyword}{\ override}}
\DoxyCodeLine{00073\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{comment}{//char\ *\ ser\ =\ "{}Server\ fd\ "{};}}
\DoxyCodeLine{00075\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}server\ start"{}}\ <<\ std::endl;}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classPeer_a6095fc5a3aa90625e70276cd3790060e}{addres}}.sin\_family\ =\ AF\_INET;}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPeer_a6095fc5a3aa90625e70276cd3790060e}{addres}}.sin\_port\ =\ htons(\mbox{\hyperlink{server_8h_a614217d263be1fb1a5f76e2ff7be19a2}{PORT}});}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPeer_a6095fc5a3aa90625e70276cd3790060e}{addres}}.sin\_addr.s\_addr\ =\ htonl(INADDR\_ANY);}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ bind(\mbox{\hyperlink{classPeer_a925963413d249aec471b34561070610c}{sock}},\ (\textcolor{keyword}{struct}\ sockaddr*)\&\mbox{\hyperlink{classPeer_a6095fc5a3aa90625e70276cd3790060e}{addres}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classPeer_a6095fc5a3aa90625e70276cd3790060e}{addres}}));}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{comment}{//waiting\ for\ connection}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ listen(\mbox{\hyperlink{classPeer_a925963413d249aec471b34561070610c}{sock}},\ 300);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//std::cout\ <<"{}test"{}\ <<std::endl;}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.push\_back(\{0,\textcolor{stringliteral}{"{}test"{}}\});}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classServer_a364cc3671338d2d426f078b6ed8f21c0}{selinit}}()\textcolor{keyword}{\ override}\{}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memset(\mbox{\hyperlink{classPeer_aeff6367e659ac6c6a649603198e56021}{buffer}},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classPeer_aeff6367e659ac6c6a649603198e56021}{buffer}}));}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FD\_ZERO(\&\mbox{\hyperlink{classPeer_a456be0991e60ae9d77c52ef647410cc6}{read\_fd}});}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FD\_SET(0,\ \&\mbox{\hyperlink{classPeer_a456be0991e60ae9d77c52ef647410cc6}{read\_fd}});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FD\_SET(\mbox{\hyperlink{classPeer_a925963413d249aec471b34561070610c}{sock}},\ \&\mbox{\hyperlink{classPeer_a456be0991e60ae9d77c52ef647410cc6}{read\_fd}});}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classServer_a7722ad8909289fd3f7b53c72673bcbd3}{sel}}()\textcolor{keyword}{\ override}\{}
\DoxyCodeLine{00107\ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.begin();\ itr\ !=\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.end();\ ++itr)}
\DoxyCodeLine{00108\ FD\_SET(itr-\/>first,\ \&\mbox{\hyperlink{classPeer_a456be0991e60ae9d77c52ef647410cc6}{read\_fd}});}
\DoxyCodeLine{00109\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ select(300,\ \&peer-\/>read\_fd,\ NULL,\ NULL,\ NULL);}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classServer_ad3820fa8247aff8a7ccfc24ae6333f75}{conn}}()\textcolor{keyword}{\ override}\{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//peer-\/>new\_socket\ =\ accept(peer-\/>sock,NULL,NULL);}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//accepting\ connection}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classServer_a6504e40ca4dd0fa36c6daf5e941477ca}{new\_socket}}\ =\ accept(\mbox{\hyperlink{classPeer_a925963413d249aec471b34561070610c}{sock}},NULL,NULL);}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//char\ g[80]=\{"{}sos"{}\};}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//g="{}sos"{};}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//read(peer-\/>new\_socket,g,1024);}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.push\_back(\{\mbox{\hyperlink{classServer_a6504e40ca4dd0fa36c6daf5e941477ca}{new\_socket}},\textcolor{stringliteral}{"{}test"{}}\});}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout<<\ \textcolor{stringliteral}{"{}New\ connection\ "{}}<<\mbox{\hyperlink{classServer_a6504e40ca4dd0fa36c6daf5e941477ca}{new\_socket}}<<std::endl;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//printf("{}New\ connection\ \%s\(\backslash\)n"{},\ peer-\/>new\_socket);}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dprintf(\mbox{\hyperlink{classServer_a6504e40ca4dd0fa36c6daf5e941477ca}{new\_socket}},\textcolor{stringliteral}{"{}welcome\ \%d\(\backslash\)n"{}},\ \mbox{\hyperlink{classServer_a6504e40ca4dd0fa36c6daf5e941477ca}{new\_socket}});\ \ }
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00130\ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classServer_ae782bc399bc3549450e3755b5effe557}{sendmes}}()\textcolor{keyword}{\ override}\{}
\DoxyCodeLine{00143\ \textcolor{comment}{//\#if\ 0}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ itr2\ =\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.begin();\ itr2\ !=\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.end();\ ++itr2)}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classServer_a0806beaf535f0bfaff2276b3e7156cbe}{sd}}\ =\ itr2-\/>first;\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (FD\_ISSET(\mbox{\hyperlink{classServer_a0806beaf535f0bfaff2276b3e7156cbe}{sd}}\ ,\ \&\mbox{\hyperlink{classPeer_a456be0991e60ae9d77c52ef647410cc6}{read\_fd}}))\ }
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{classServer_a97172fe0c07ccee4b28afec4b43f19e5}{valread}}\ =\ read(\mbox{\hyperlink{classServer_a0806beaf535f0bfaff2276b3e7156cbe}{sd}},\ \mbox{\hyperlink{classPeer_aeff6367e659ac6c6a649603198e56021}{buffer}},\ 1024)))\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\{\ }}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf("{}Host\ disconnected\ \%s\ \(\backslash\)n"{}\ ,itr2-\/>second);\ }}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close(peer-\/>sd);\ }}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ peer-\/>nicknames.erase(itr2);\ }}
\DoxyCodeLine{00154\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ break;\ \ \ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00155\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPeer_aeff6367e659ac6c6a649603198e56021}{buffer}}[\mbox{\hyperlink{classServer_a97172fe0c07ccee4b28afec4b43f19e5}{valread}}]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ itr1\ =\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.begin();\ itr1\ !=\ \mbox{\hyperlink{classServer_a2f35cbd487ea1572f851821364bb54ad}{nicknames}}.end();\ ++itr1)}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dprintf(itr1-\/>first,\textcolor{stringliteral}{"{}\%s\ says:\ \%s\(\backslash\)n"{}},itr2-\/>second,\ \mbox{\hyperlink{classPeer_aeff6367e659ac6c6a649603198e56021}{buffer}});}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ \textcolor{comment}{//\#endif}}
\DoxyCodeLine{00168\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ \};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ }

\end{DoxyCode}
